<!doctype html><html lang=vi dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Khi tìm kiếm từ khoá Hooks trên Google, chúng ta sẽ thấy rất nhiều kết quả liên quan đến React. Quả thật, như trong phần giới thiệu, thư viện flutter_hooks được tác giả Remi Rousselet build dựa trên niềm cảm hứng từ React."><title>Flutter Hooks - viết code ngắn gọn và hiệu quả hơn</title>
<link rel=canonical href=https://namanh11611.github.io/vi/p/flutter-hooks/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Flutter Hooks - viết code ngắn gọn và hiệu quả hơn"><meta property='og:description' content="Khi tìm kiếm từ khoá Hooks trên Google, chúng ta sẽ thấy rất nhiều kết quả liên quan đến React. Quả thật, như trong phần giới thiệu, thư viện flutter_hooks được tác giả Remi Rousselet build dựa trên niềm cảm hứng từ React."><meta property='og:url' content='https://namanh11611.github.io/vi/p/flutter-hooks/'><meta property='og:site_name' content='Henry Techie'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Flutter'><meta property='article:tag' content='Hooks'><meta property='article:tag' content='Riverpod'><meta property='article:published_time' content='2024-04-30T00:00:00+07:00'><meta property='article:modified_time' content='2024-04-30T00:00:00+07:00'><meta property='og:image' content='https://namanh11611.github.io/p/flutter-hooks/hooks.jpeg'><meta name=twitter:title content="Flutter Hooks - viết code ngắn gọn và hiệu quả hơn"><meta name=twitter:description content="Khi tìm kiếm từ khoá Hooks trên Google, chúng ta sẽ thấy rất nhiều kết quả liên quan đến React. Quả thật, như trong phần giới thiệu, thư viện flutter_hooks được tác giả Remi Rousselet build dựa trên niềm cảm hứng từ React."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://namanh11611.github.io/p/flutter-hooks/hooks.jpeg'><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Hiển thị Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/vi/><img src=/img/avatar_hu10819092844164883550.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/vi>Henry Techie</a></h1><h2 class=site-description>Software Engineer</h2></div></header><ol class=menu-social><li><a href=https://linkedin.com/in/namanh11611 target=_blank title=LinkedIn rel=me><svg class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li><li><a href=https://github.com/namanh11611 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://viblo.asia/u/namanh11611 target=_blank title=Viblo rel=me><svg class="icon icon-tabler icon-tabler-letter-v" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4l6 16 6-16"/></svg></a></li><li><a href=https://twitter.com/namanh11611 target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li><li><a href=https://facebook.com/namanh11611 target=_blank title=Facebook rel=me><svg class="icon icon-tabler icon-tabler-brand-facebook" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 011-1h3V3h-3a5 5 0 00-5 5v2H7"/></svg></a></li></ol><ol class=menu id=main-menu><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://namanh11611.github.io/>English</option><option value=https://namanh11611.github.io/vi/ selected>Tiếng Việt</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Chế độ nền tối</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Mục lục</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#flutter-hooks-là-cái-chi-chi>Flutter Hooks là cái chi chi?</a></li><li><a href=#hướng-dẫn-sử-dụng>Hướng dẫn sử dụng</a><ol><li><a href=#useeffect-hook>useEffect hook</a></li><li><a href=#usestate-hook>useState hook</a></li><li><a href=#usememoized-hook>useMemoized hook</a></li><li><a href=#useref-hook>useRef hook</a></li><li><a href=#usecallback-hook>useCallback hook</a></li><li><a href=#usecontext-hook>useContext hook</a></li><li><a href=#usevaluechanged-hook>useValueChanged hook</a></li><li><a href=#usestream-hook>useStream hook</a></li><li><a href=#useanimationcontroller-hook>useAnimationController hook</a></li></ol></li><li><a href=#lợi-ích-của-hooks>Lợi ích của Hooks</a></li><li><a href=#lời-kết>Lời kết</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/vi/p/flutter-hooks/><img src=/p/flutter-hooks/hooks_hu8858302649407145872.jpeg srcset="/p/flutter-hooks/hooks_hu8858302649407145872.jpeg 800w, /p/flutter-hooks/hooks_hu11741907888332971642.jpeg 1600w" width=800 height=533 loading=lazy alt="Featured image of post Flutter Hooks - viết code ngắn gọn và hiệu quả hơn"></a></div><div class=article-details><header class=article-category><a href=/vi/categories/technical/ style=background-color:#ef5350;color:#fff>Technical</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/vi/p/flutter-hooks/>Flutter Hooks - viết code ngắn gọn và hiệu quả hơn</a></h2><h3 class=article-subtitle>Khi tìm kiếm từ khoá Hooks trên Google, chúng ta sẽ thấy rất nhiều kết quả liên quan đến React. Quả thật, như trong phần giới thiệu, thư viện flutter_hooks được tác giả Remi Rousselet build dựa trên niềm cảm hứng từ React.</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>thg 4 30, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 phút đọc</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://namanh11611.github.io/p/flutter-hooks/ class=link>English</a></div></footer></div></header><section class=article-content><h1 id=flutter-hooks-là-cái-chi-chi>Flutter Hooks là cái chi chi?</h1><p>Khi tìm kiếm từ khoá <strong>Hooks</strong> trên Google, chúng ta sẽ thấy rất nhiều kết quả liên quan đến <strong>React</strong>. Quả thật, như trong phần giới thiệu, thư viện <a class=link href=https://pub.dev/packages/flutter_hooks target=_blank rel=noopener><strong>flutter_hooks</strong></a> được tác giả <a class=link href=https://github.com/rrousselGit target=_blank rel=noopener><strong>Remi Rousselet</strong></a> build dựa trên niềm cảm hứng từ React.</p><p><strong>Hooks</strong> là một loại object giúp quản lý life-cycle của <code>Widget</code>. Mục tiêu duy nhất của nó là giúp tăng khả năng chia sẻ source code giữa các <code>Widget</code> bằng cách loại bỏ các phần code trùng lặp.</p><p>Các bạn có thể sẽ thắc mắc: <em>&ldquo;Ủa, <code>StatefulWidget</code> trong Flutter đã có method <code>initState</code> và <code>dispose</code> để lo việc quản lý life-cycle rồi cơ mà? Cần gì Hook nữa?&rdquo;</em>. Chính xác, thế nhưng chúng ta rất khó để tái sử dụng code trong 2 method này. Và <strong>Hooks</strong> sinh ra để giải quyết vấn đề đó.</p><h1 id=hướng-dẫn-sử-dụng>Hướng dẫn sử dụng</h1><p>Một ví dụ đơn giản về Hooks như sau:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MyHookWidget</span> <span class=kd>extends</span> <span class=n>HookWidget</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>const</span> <span class=n>MyHookWidget</span><span class=p>({</span><span class=k>super</span><span class=p>.</span><span class=n>key</span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=n>Widget</span> <span class=n>build</span><span class=p>(</span><span class=n>BuildContext</span> <span class=n>context</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>counter</span> <span class=o>=</span> <span class=n>useState</span><span class=p>(</span><span class=m>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Scaffold</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nl>body:</span> <span class=n>Center</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nl>child:</span> <span class=n>Text</span><span class=p>(</span><span class=s1>&#39;Counter: </span><span class=si>${</span><span class=n>counter</span><span class=p>.</span><span class=n>value</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nl>floatingActionButton:</span> <span class=n>FloatingActionButton</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nl>onPressed:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=n>counter</span><span class=p>.</span><span class=n>value</span><span class=o>++</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nl>child:</span> <span class=kd>const</span> <span class=n>Icon</span><span class=p>(</span><span class=n>Icons</span><span class=p>.</span><span class=n>add</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Bạn có thể thấy <code>Widget</code> của chúng ta thay vì extend <code>StatefulWidget</code> hay <code>StatelessWidget</code>, thì bây giờ nó phải extend một <code>HookWidget</code>. Trong method <code>build</code> có một từ khoá lạ lạ là <code>useState</code>, đấy chính là một trong những <strong>hook</strong> của Flutter Hooks, phần sau chúng ta sẽ cùng đi tìm hiểu một số hook cơ bản của nó.</p><p>Giờ đây, khi bạn click vào <code>FloatingActionButton</code>, giá trị của text sẽ thay đổi với biến <code>counter</code> tăng dần, nó tương tự như cách mà <code>StatefulWidget</code> hoạt động phải không nào?</p><h2 id=useeffect-hook>useEffect hook</h2><p>Nó gần giống với <code>useEffect</code> hook của React, được sử dụng để thực hiện các side effect <strong>synchronously</strong> trong quá trình render. Effect có thể return một function, function này sẽ được gọi khi <strong>effect được gọi lại</strong> hoặc <strong>widget bị dispose</strong>.</p><p>Mặc định, effect được gọi lại mỗi lần build, trừ khi chúng ta truyền <strong>param key</strong>. Khi đó, effect chỉ được gọi lại khi key thay đổi.</p><p>Side effect có thể bao gồm stream subscription, mở một <strong>WebSocket connection</strong> hoặc thực hiện một <strong>HTTP request</strong>. Chúng ta có thể cancel chúng khi widget bị dispose.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>useEffect</span><span class=p>(()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>performSideEffect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>cleanUp</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[</span><span class=n>key</span><span class=p>]);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=usestate-hook>useState hook</h2><p>Đây là loại hook cơ bản nhất khi bạn muốn chuyển một <code>StatelessWidget</code> sang <code>StatefulWidget</code>. Khi được gọi trong method <code>build</code>, nó sẽ giữ state giữa những lần widget rebuild.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>counter</span> <span class=o>=</span> <span class=n>useState</span><span class=p>(</span><span class=m>0</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>Trong ví dụ này, chúng ta truyền cho nó một giá trị khởi tạo là <code>0</code>. Biến <code>counter</code> chính là một instance của <code>ValueNotifier</code>. State được lưu trong thuộc tính <code>value</code> của <code>ValueNotifier</code>. Mỗi khi giá trị của <code>value</code> bị thay đổi, <code>useState</code> hook sẽ rebuild widget để hiển thị giá trị mới.</p><h2 id=usememoized-hook>useMemoized hook</h2><p>Đây là một method hữu ích khi bạn cần tạo một object phức tạp và muốn trả về cùng một object đó qua nhiều lần rebuild widget con. <code>useMemoized</code> sẽ giúp chúng ta cache object đó, giá trị chỉ được tính toán trong lần gọi đầu tiên, còn những lần sau, nó sẽ trả về giá trị đã được lưu trước đó.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>complexObject</span> <span class=o>=</span> <span class=n>useMemoized</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>()</span> <span class=o>=&gt;</span> <span class=n>createComplexObject</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>  <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=useref-hook>useRef hook</h2><p>Tạo một object chứa một thuộc tính có thể thay đổi. Tuy nhiên thì việc thay đổi thuộc tính của object sẽ không có effect. Nó phù hợp cho các use-case mà chúng ta cần share state giữa những lần <code>build</code> method được gọi, nhưng tránh được việc rebuild không cần thiết.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>textController</span> <span class=o>=</span> <span class=n>useTextEditingController</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>/// Sử dụng useState() trong trường hợp này
</span></span></span><span class=line><span class=cl><span class=c1>/// sẽ làm widget rebuild mỗi lần nhập một ký tự
</span></span></span><span class=line><span class=cl><span class=c1>// final name = useState(&#39;&#39;);
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>final</span> <span class=n>name</span> <span class=o>=</span> <span class=n>useRef</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>useEffect</span><span class=p>(()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>textController</span><span class=p>.</span><span class=n>addListener</span><span class=p>(()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>textController</span><span class=p>.</span><span class=n>text</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=usecallback-hook>useCallback hook</h2><p>Cache instance của toàn bộ một function, nếu như chính function đó được gọi lại.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>cachedFun</span> <span class=o>=</span> <span class=n>useCallback</span><span class=p>(()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Statements</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=usecontext-hook>useContext hook</h2><p>Giữ <code>BuildContext</code> của <code>HookWidget</code>, giúp chúng ta không phải truyền param <code>context</code> qua các method.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>Widget</span> <span class=n>createSizedBox</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>SizedBox</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nl>height:</span> <span class=n>MediaQuery</span><span class=p>.</span><span class=n>sizeOf</span><span class=p>(</span><span class=n>useContext</span><span class=p>()).</span><span class=n>height</span> <span class=o>/</span> <span class=m>10</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=usevaluechanged-hook>useValueChanged hook</h2><p>Theo dõi một giá trị và trigger một callback bất cứ khi nào giá trị của nó thay đổi. Quay trở lại với ví dụ ban đầu, chúng ta sửa một chút như sau:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>count</span> <span class=o>=</span> <span class=n>useState</span><span class=p>(</span><span class=m>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>newCount</span> <span class=o>=</span> <span class=n>useState</span><span class=p>(</span><span class=m>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>useValueChanged</span><span class=p>(</span><span class=n>count</span><span class=p>.</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=n>oldValue</span><span class=p>,</span> <span class=n>oldResult</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>print</span><span class=p>(</span><span class=s1>&#39;oldValue = </span><span class=si>$</span><span class=n>oldValue</span><span class=s1>, oldResult = </span><span class=si>$</span><span class=n>oldResult</span><span class=s1>&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>newCount</span><span class=p>.</span><span class=n>value</span> <span class=o>+=</span> <span class=m>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>newCount</span><span class=p>.</span><span class=n>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>Khi click <code>FloatingActionButton</code>, kết quả sẽ được in ra lần lượt như sau:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>oldValue = 0, oldResult = null
</span></span><span class=line><span class=cl>oldValue = 1, oldResult = 5
</span></span><span class=line><span class=cl>oldValue = 2, oldResult = 10
</span></span><span class=line><span class=cl>...
</span></span></code></pre></td></tr></table></div></div><p>Bạn có thể thấy, mỗi khi giá trị của <code>count</code> thay đổi, <code>newCount</code> cũng sẽ được thay đổi theo.</p><h2 id=usestream-hook>useStream hook</h2><p>Giúp subscribe một <code>Stream</code> và return state hiện tại nó.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>snapshot</span> <span class=o>=</span> <span class=n>useStream</span><span class=p>(</span><span class=n>backend</span><span class=p>.</span><span class=n>stream</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=useanimationcontroller-hook>useAnimationController hook</h2><p>Tạo một <code>AnimationController</code> và nó sẽ bị dispose một cách tự động.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>controller</span> <span class=o>=</span> <span class=n>useAnimationController</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nl>duration:</span> <span class=n>Duration</span><span class=p>(</span><span class=nl>seconds:</span> <span class=m>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=lợi-ích-của-hooks>Lợi ích của Hooks</h1><ol><li><strong>State Management</strong>: Hooks giúp đơn giản hóa việc quản lý local state, đảm bảo widget chỉ xử lý logic liên quan đến nó.</li><li><strong>Giảm duplicate code</strong>: Custom hooks cho phép bạn tái sử dụng logic của widget, giảm đáng kể việc duplicate code và cải thiện chất lượng code.</li><li><strong>Cải thiện Hot Reload</strong>: Với hooks, hot reload mặc định ít bị lỗi hơn vì trạng thái của hook được giữ nguyên.</li><li><strong>Tiện lợi</strong>: Một số built-in hooks như <code>useAnimationController</code>, <code>useFuture</code> và <code>useStream</code> là những method có thể áp dụng cho nhiều use-case phổ biến.</li><li><strong>Đơn giản hóa life-cycle</strong>: Việc quản lý các life-cycle phức tạp trở nên đơn giản hơn rất nhiều với Flutter Hooks. Chúng cung cấp một giải pháp để dễ dàng quản lý state, side-effects và stream subscriptions.</li><li><strong>Custom hooks linh hoạt</strong>: Ngoài các hook đã có sẵn, Flutter Hooks cho phép bạn tạo các hooks tùy chỉnh, giúp việc viết code linh hoạt hơn.</li></ol><p>Có thể bạn đã biết <strong>Remi Rousselet</strong> còn là tác giả của 2 thư viện <strong>State Management</strong> nổi tiếng là <a class=link href=https://pub.dev/packages/provider target=_blank rel=noopener><strong>Provider</strong></a> và <a class=link href=https://pub.dev/packages/flutter_riverpod target=_blank rel=noopener><strong>Riverpod</strong></a>. Trong đó thì anh ấy đã kết hợp Riverpod và Hook trong một thư viện là <a class=link href=https://pub.dev/packages/hooks_riverpod target=_blank rel=noopener><strong>Hooks Riverpod</strong></a>. Bạn có thể nhân hai sức mạnh với thư viện này. Riverpod là dành cho &ldquo;global&rdquo; application state, còn hooks dành cho local widget state.</p><h1 id=lời-kết>Lời kết</h1><p>Mình thấy <strong>Flutter Hooks</strong> khá tiềm năng, nhưng vẫn thấy chưa nhiều dự án áp dụng. Không biết các bạn đã từng áp dụng nó chưa? Nếu thấy nó có ưu hoặc nhược điểm gì, hãy chia sẻ với mình nhé.</p></section><footer class=article-footer><section class=article-tags><a href=/vi/tags/flutter/>Flutter</a>
<a href=/vi/tags/hooks/>Hooks</a>
<a href=/vi/tags/riverpod/>Riverpod</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Bài viết liên quan</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/vi/p/riverpod/><div class=article-image><img src=/p/riverpod/riverpod.116bef71283264a42df4586b4debe494_hu14846020956701835912.jpg width=250 height=150 loading=lazy alt="Featured image of post Dùng code generation provider trong Flutter Riverpod cho đời đơn giản hơn" data-key=riverpod data-hash="md5-EWvvcSgyZKQt9FhrTevklA=="></div><div class=article-details><h2 class=article-title>Dùng code generation provider trong Flutter Riverpod cho đời đơn giản hơn</h2></div></a></article><article class=has-image><a href=/vi/p/curved-bottom-navigation-bar/><div class=article-image><img src=/p/curved-bottom-navigation-bar/navigation.21afe3a3804e5b23249a6bd541730cab_hu12095876428414217104.jpeg width=250 height=150 loading=lazy alt="Featured image of post Custom Curved Bottom Navigation Bar trong Flutter" data-key=curved-bottom-navigation-bar data-hash="md5-Ia/jo4BOWyMkmmvVQXMMqw=="></div><div class=article-details><h2 class=article-title>Custom Curved Bottom Navigation Bar trong Flutter</h2></div></a></article><article class=has-image><a href=/vi/p/looper-message-queue-handler/><div class=article-image><img src=/p/looper-message-queue-handler/looper_message_queue_handler.1dbe3d30b9e43c4d58c7b653994f289a_hu17488800224501672840.jpg width=250 height=150 loading=lazy alt="Featured image of post Tất tần tật về Looper, MessageQueue và Handler trong Android" data-key=looper-message-queue-handler data-hash="md5-Hb49MLnkPE1Yx7ZTmU8omg=="></div><div class=article-details><h2 class=article-title>Tất tần tật về Looper, MessageQueue và Handler trong Android</h2></div></a></article><article class=has-image><a href=/vi/p/git-branching-strategy/><div class=article-image><img src=/p/git-branching-strategy/strategy.51a656d89fca7b964b18982988ae05fc_hu8065301213643378702.jpg width=250 height=150 loading=lazy alt="Featured image of post Gitflow, GitHub Flow, GitLab Flow, Trunk Based Development: Đâu mới là Git Branching Strategy chân ái?" data-key=git-branching-strategy data-hash="md5-UaZW2J/Ke5ZLGJgpiK4F/A=="></div><div class=article-details><h2 class=article-title>Gitflow, GitHub Flow, GitLab Flow, Trunk Based Development: Đâu mới là Git Branching Strategy chân ái?</h2></div></a></article><article class=has-image><a href=/vi/p/kotlin-flow-cheat-sheet-3/><div class=article-image><img src=/p/kotlin-flow-cheat-sheet-3/cheat_sheet.0ee33b4992bad3a07948a7a3d1f9ee25_hu14153366638861432240.jpg width=250 height=150 loading=lazy alt="Featured image of post Kotlin Flow cheat sheet phần 3: SharedFlow và StateFlow" data-key=kotlin-flow-cheat-sheet-3 data-hash="md5-DuM7SZK606B5SKej0fnuJQ=="></div><div class=article-details><h2 class=article-title>Kotlin Flow cheat sheet phần 3: SharedFlow và StateFlow</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//henry-techie.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2019 -
2025 Henry Techie</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> thiết kế bởi <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script data-goatcounter=https://henry-techie.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>